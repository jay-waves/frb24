\documentclass[zihao=-4]{ctexart}
\usepackage[normalem]{ulem}
\useunder{\uline}{\ul}{}
%********************导言区宏包引入********************
\usepackage{xeCJK}
\usepackage{amssymb}
\usepackage{amsmath}
\usepackage{listings} %代码
\usepackage{graphicx}
\usepackage{multicol} %回车换段
\usepackage{xcolor}
\usepackage{geometry} %页面设置
\usepackage{fontspec}
\usepackage{setspace}
\usepackage{times}
\usepackage{fancyhdr} %页眉页脚
\pagestyle{fancy}
\usepackage{float} %表格位置
\usepackage{titlesec} %设置
\usepackage{titletoc}
\usepackage{ctex}
\usepackage{gbt7714}    %控制参考文献格式为国标
\usepackage{multirow}
\usepackage{booktabs}   %表格相关
\usepackage{setspace}   %设置行距
\usepackage{caption} %caption
\usepackage{subcaption} %子图的caption
\usepackage{changepage} %左右缩进
\usepackage{url} % 处理链接换行

\graphicspath{ {pictures/} }
\let\algorithm\relax
\let\endalgorithm\relax
\usepackage[ruled,vlined]{algorithm2e}%[ruled,vlined]{
\usepackage{algpseudocode}
\renewcommand{\algorithmicrequire}{\textbf{Input:}} 
\renewcommand{\algorithmicensure}{\textbf{Output:}}
%\renewcommand\thepage{\zihao{-5} ~\arabic{page}~}%页码字号

%定义两个arg
\DeclareMathOperator*{\argmax}{arg\,max}
\DeclareMathOperator*{\argmin}{arg\,min}
\DeclareCaptionLabelSeparator{mysep}{\space\space}  %自定义caption格式
\captionsetup[figure]{font={small}, labelfont=bf, labelsep=mysep, textfont=bf}   %图片caption格式
\captionsetup[table]{font={small}, labelfont=bf, labelsep=mysep, textfont={bf}}   %表格caption格式
\bibliographystyle{gbt7714-numerical} %修改了title斜体内容

%********************导言区宏包引入********************
%********************第三方字体引入********************
%\setCJKmainfont[Path=fonts/,BoldFont=simhei.ttf,ItalicFont=simkai.ttf,SlantedFont=simfang.ttf]{simsun.ttc}
%中文字体涵盖黑体、宋体、楷体、仿宋
\setmainfont[Path=fonts/, 
BoldFont = times-new-roman-bold.ttf,
ItalicFont = times-new-roman-italic.ttf,
BoldItalicFont = times-new-roman-bold-italic.ttf
]{times-new-roman.ttf}
\setmonofont[Path=fonts/]{Courier New.ttf}
\setCJKfamilyfont{hwzs}[Path=fonts/]{STKzhongsong.ttf}%使用STZhogsong华文中宋字体
\newcommand{\zhongsong}{\CJKfamily{hwzs}}
\setCJKfamilyfont{hwxw}[Path=fonts/]{STKxinwei.ttf} % XSP 2023/3/3:
\newcommand{\xinwei}{\CJKfamily{hwxw}}              %  使用STZxinwei华文新魏字体.

%********************第三方字体引入********************

%********************代码段设置********************
% by yjw
% \texttt 用于行内代码，等宽字体，不知道让不让用
\usepackage{listings} % 用于代码排版
% 代码请放到figure环境中去使用，共享图片的编号
\usepackage{xcolor} % 用于代码高亮
% 定义代码块样式
\lstdefinestyle{codeblock}{
    backgroundcolor=\color{white},    % 背景颜色
    basicstyle=\ttfamily\small\fontsize{9pt}{8pt}\selectfont, % 设置字体大小和行间距
    breakatwhitespace=false,          % 是否只在空白处自动断行
    breaklines=true,                  % 自动断行
    captionpos=b,                     % 标题位置
    commentstyle=\color{gray},        % 注释风格
    frame=single,                     % 单框
    keepspaces=true,                  % 保持空格
    keywordstyle=\color{blue},        % 关键字风格
    numbers=left,                     % 行号位置
    numbersep=15pt,                    % 行号与代码的距离
    numberstyle=\tiny\color{gray},    % 行号样式
    rulecolor=\color{black},          % 框架颜色
    showspaces=false,                 % 不显示空格
    showstringspaces=false,           % 字符串中不显示空格
    showtabs=false,                   % 不显示制表符
    stepnumber=1,                     % 步长
    stringstyle=\color{orange},       % 字符串风格
    tabsize=2,                        % 制表符占用空格数
    xleftmargin=35pt,                 % 左边距
    xrightmargin=25pt,
    framexleftmargin=25pt,            % 框架左边距，增加些许间距以包含行号
}
\lstset{style=codeblock}
%********************代码段设置********************

%********************中文字号设置********************
%\newcommand{\chuhao}{\fontsize{42pt}{\baselineskip}\selectfont}
\newcommand{\chuhao}{\fontsize{42pt}{0}}
\newcommand{\xiaochu}{\fontsize{36pt}{0}}
\newcommand{\yihao}{\fontsize{28pt}{0}}
\newcommand{\erhao}{\fontsize{21pt}{0}}
\newcommand{\xiaoer}{\fontsize{18pt}{0}}
\newcommand{\sanhao}{\fontsize{16pt}{0}}
\newcommand{\sihao}{\fontsize{14pt}{0}}
\newcommand{\xiaosi}{\fontsize{12pt}{0}}
\newcommand{\wuhao}{\fontsize{10.5pt}{0}}
\newcommand{\xiaowu}{\fontsize{9pt}{0}}
\newcommand{\liuhao}{\fontsize{8pt}{0}}
\newcommand{\qihao}{\fontsize{5.25pt}{0}}
%********************中文字号设置********************


%********************页边距设置********************
\geometry{left=3cm,right=2cm,top=2.5cm,bottom=2.5cm}
\geometry{a4paper} % xsp 2023/3/7: 调整纸张大小为A4
%********************页边距设置********************

%********************段间距设置********************
\newcommand{\setParDis}{\setlength {\parskip} {0pt} }
%请在每部分使用这个
%********************段间距设置********************

%********************子文件导入区域****************
% 用于仅编译部分导入文件
% \includeonly{subtexs/ros_background, }

\begin{document}
%********************页眉页脚设置********************
\lhead{}%设置左页眉为空
\rhead{}%设置左页眉为空
\setlength{\headwidth}{\textwidth}% 2023/3/3 XSP: 页眉长度适应文本
%********************页眉页脚设置********************


%********************标题格式设置********************

%\setcounter{secnumdepth}{0}%该命令取消了章标题前数字label

\CTEXsetup[name={,、},number={\chinese{section}}]{section}
\CTEXsetup[name={（,）},number={\chinese{subsection}}]{subsection}
\CTEXsetup[name={,.},number={\arabic{subsubsection}}]{subsubsection}% 不加会导致目录格式错误
% 设置subsubsection等格式
% \titleformat{\section}[block]{\sanhao\bfseries\centering}{\chinese{section}、}{0pt}{}[]
% \titleformat{\subsection}[block]{\sihao\bfseries}{（\chinese{subsection}）}{0pt}{}[]
% \titleformat{\subsubsection}[block]{\xiaosi\bfseries}{\arabic{subsubsection}、}{0pt}{}[]
\titleformat{\section}[block]{\sanhao\heiti\centering}{\chinese{section}、}{0pt}{}[]    % XSP 2023/3/3:
\titleformat{\subsection}[block]{\sihao\heiti}{（\chinese{subsection}）}{0pt}{}[]       %   将正文标题字体由加粗
\titleformat{\subsubsection}[block]{\xiaosi\heiti}{\arabic{subsubsection}.}{0pt}{}[]   % 修改为黑体。
\titlespacing{\section}{0pt}{25pt}{12pt}
\titlespacing{\subsection}{0pt}{7pt}{7pt}
\titlespacing{\subsubsection}{0pt}{5pt}{4pt}

\titlecontents{section}[1.6em]{\addvspace{2pt}\filright}
{\contentspush{\thecontentslabel\hspace{0.8em}}}
{}{\titlerule*[8pt]{.}\contentspage}

\titlecontents{subsection}[3.2em]{\addvspace{2pt}\filright}
{\contentspush{\thecontentslabel\hspace{0.8em}}}
{}{\titlerule*[8pt]{.}\contentspage}

\titlecontents{subsubsection}[6.4em]{\addvspace{2pt}\filright}
{\contentspush{\thecontentslabel\hspace{0.8em}}}
{}{\titlerule*[8pt]{.}\contentspage}
%********************标题格式设置********************

%\setcounter{section}{-3}  %标题计数器
%\stepcounter{section}

%*******************行间距段前段后*******************
\linespread{1.8}
%行间距为实际行间距乘以1.2,如此处实际为1.5倍行距
\setlength{\parskip}{0.5\baselineskip}
%*******************行间距段前段后*******************



%********************封面部分********************
%
%     论文题目：应准确、鲜明、简洁，能概括整个论文中最主要和最重要的内容。
% 题目不超过20个中文字，若语意未尽，可用副标题补充说明。副标题应处于从属
% 地位，一般可在题目的下一行用破折号“——”引出。论文题目应避免使用不常用缩
% 略词、首字母缩写字、字符、代号和公式等。
%
\def\Fengru{第三十四届“冯如杯”竞赛主赛道}
\leftline{\includegraphics[scale=1]{pictures/xiaohui.png}} % XSP 2023/3/3: 取消校徽段首缩进
%格式控制部分
% \par \  
% \par \
% \par \
\vspace{32pt}
\begin{center}
\includegraphics[height=2.25cm, width=12.78cm, scale=1]{pictures/xiaoming.png}
\end{center}
%格式控制部分
\vspace{12pt}

\begin{spacing}{3}
    % \erhao
    \begin{center}
      {
        \fontsize{22pt}{3}\selectfont
        \zhongsong{针对机器人操作系统的自动测试框架} 
      } 
        % \zhongsong{“冯如杯”竞赛主赛道项目是什么}
    \end{center}
    \rightline{\xinwei\sanhao{——基于模糊测试技术}} % XSP 2023/3/3: 副标题二号华文新魏居右
\end{spacing}
%格式控制部分
\par \ 
\par \
\par \ 
\par \


%格式控制部分
\par \ 
\begin{center}
\sanhao
\centerline{\heiti{}}%封面年月去掉
\end{center}

\pagenumbering{gobble} %封面无页码
%\thispagestyle{empty}


\renewcommand{\headrulewidth}{0pt}%没有页眉装饰线
\clearpage
\pagenumbering{roman} %摘要目录页小写罗马

\xiaosi
\section*{摘要}
\begin{spacing}{1.5}
  \setParDis %设置段间距为 0
% 500z字? 目的, 意义, 研究方法, 成果, 结论
商用机器人、自动驾驶等领域的快速发展，带动了相关软件工具的进步。其中，机器人操作
系统（ROS2），以其开源、跨平台、高效的软件框架及丰富的工具库而深受开发者喜爱，在
学界、商业应用中得到广泛应用。与此同时，机器人操作系统也存在开源软件共有的安全漏
洞多、不稳定等问题，制约着其进一步发展，也威胁着相关应用的安全。

机器人操作系统相关程序亟需一种高效的测试方法，面对这一场景，我们选择将自动模糊测
试技术（Fuzzing）引入对机器人操作系统的测试。通过随机变异测试输入，并加入反馈引
导，模糊测试不仅提高了测试的自动化程度，还能有效地探索软件异常路径，揭露隐蔽漏
洞，显著改善了传统软件测试方法的繁琐性和低效性。

为了提高测试效率，我们的模糊测试对机器人系统进行针对性优化。针对通信网络环境的不
稳定性，本框架选择将机器人收到的通信消息等多维度输入进行随机化变异；针对机器人多
进程多线程的软件特点，本框架通过程序插桩延迟来提高数据竞争概率；针对机器人程序弱
状态特点，本框架通过流量分析等黑盒手段，来辅助推测程序内部状态。

本作品设计的测试框架短期内共发掘28个ROS2相关软件的内存漏洞、并发漏洞，其中11个得
到开发者确认修复，其中有8个重要漏洞被美国通用漏洞披露（CVE）收录，3个漏洞被中国
国家信息安全漏洞共享平台（CNVD）收录， 4个漏洞正在等待CNVD三级审核。

综上，本作品——针对机器人系统的模糊测试框架在软件测试中有较高实践价值，已为开源社
区贡献多次漏洞修复，并可高效地移植用于测试其他机器人程序。


\end{spacing}
    
\textbf{关键词：}自动模糊测试技术，机器人操作系统，并发漏洞检测，内存安全漏洞检测

\newpage
\section*{\textbf{Abstract}} % XSP 2023/3/8: Abstract 加粗
\begin{spacing}{1.5}
\begin{adjustwidth}{0.42cm}{0.42cm}
\setParDis %设置段间距为 0

\noindent\hspace{\parindent}The swift advancement in commercial robotics and
autonomous driving has spurred the development of associated software tools,
notably the Robot Operating System (ROS2). Celebrated for its open-source,
cross-platform capabilities, and extensive toolkit, ROS2 has garnered widespread
adoption across academia and industry. However, its growth is hampered by common
open-source software issues like security vulnerabilities and instability,
posing risks to application safety.

Addressing the need for efficient testing in \textbf{ROS2-related programs}, we
introduced automatic \textbf{fuzz} testing to enhance software reliability. By
employing randomized mutations of test inputs and feedback guidance, fuzz
testing significantly elevates automation and efficacy in exploiting
vulnerabilities, outpacing traditional testing in identifing uncovering software
exception.

Our framework, tailored for robotic systems, addresses communication network
instability by randomizing inputs like received communication messages. It
targets software's multi-process and multi-threaded nature by increasing data
race probabilities via program instrumentation delays. Additionally, to navigate
the challenges posed by robots' weak states, our framework utilizes black-box
methods, such as traffic analysis, to infer internal states. The approach led to
the discovery of 28 ROS2 software vulnerabilities, with 11 confirmed and fixed
by developers, including 8 recognized by the US's CVE, 3 recognized by China's
CNVD and 4 awaiting final review.

This work demonstrates the high practical value of our fuzz testing framework
for robotic systems, contributing significantly to the open-source community and
efficiently adaptable for testing various robot programs.

\textbf{Keywords: Fuzz, ROS2, Concurrent Vulnerability, Memory Vulnerability}
\end{adjustwidth}
\end{spacing}
%********************摘要部分********************

%********************目录部分********************
\clearpage
\tableofcontents
\clearpage
%********************目录部分********************

\renewcommand{\headrulewidth}{0.4pt} %恢复页眉装饰线

%********************正文页眉部分********************
%\lhead{} 
\chead{\xiaowu 北京航空航天大学\Fengru 参赛作品} %设置居中页眉
%********************正文页眉部分********************

\pagenumbering{arabic} %正文页码从1开始，用阿拉伯数字
\setcounter{page}{1} 

%******************* 一 作品概述************************
\section{作品概述}
\setParDis %设置段间距为 0
\begin{spacing}{1.5} % 行距1.5


\subsection{背景介绍} %@author: lhy
\input{subtexs/lhy_background}

\subsection{研究现状}
% 这里衔接一下为什么我们想将模糊测试应用到ROS上

\subsubsection{ROS常见测试方案}
%@author: yjw
\input{subtexs/yjw_fuzzer_state_ofart.tex}

\subsubsection{模糊测试及其应用}
%@author: jfb
模糊测试是近年来最受欢迎的软件测试技术之一，通过向系统输入异常、随机或无效的数据
来暴露软件中的缺陷、漏洞和崩溃。模糊测试在不需要了解应用程序内部逻辑的情况下，检
测软件如何处理意外或错误的输入，非常适合寻找安全漏洞，如缓冲区溢出、执行流程控制
错误、内存泄露等。同时，利用模糊测试发现了许多高影响力的安全漏洞（如
Heartbleed、Shellshock等），进一步证明了其有效性和重要性。

尽管模糊测试在软件安全领域得到了广泛应用，但在ROS环境中的应用相对较少。随着人工
智能技术的发展和ROS在人工智能如无人驾驶等研究及应用中的重要性增加，对于ROS环境的模
糊测试方法的需求和研究也在逐渐增长。开发专门针对ROS系统特点的模糊测试工具和技
术，可以有效提高机器人软件的可靠性和安全性。

\subsection{作品概述}
%@author: yjw
\input{subtexs/yjw_overview}


%*********************** 二 作品设计与实现***************
\section{作品设计与实现}
\setParDis %设置段间距为 0

\subsection{技术背景与预备知识} %@author: wkt, yjw, jfb
\input{subtexs/wkt2}
\input{subtexs/jfb_tech_background.tex}
\input{subtexs/yjw_ros_background.tex}

\subsection{关键设计} %@author: yjw
\input{subtexs/yjw_key_fuzz_design}

%********************* 三 成果与分析 *****************
\section{作品测试与成果分析} %@author: wkt
\setParDis %设置段间距为 0

\input{subtexs/wkt}
% 创新型说明与前景分析 @author: jfb
\input{subtexs/jfb_innovation.tex}

\section*{结论}% section*生成无标号章节
\setParDis %设置段间距为 0
\addcontentsline{toc}{section}{结论} % 将无标号章节添加至目录
%@author: jfb
综上所述，本作品成功开发并应用了一种创新的针对ROS的模糊测试框架，进一步提高机器
人应用程序的安全性和稳定性。通过对ROS系统进行深入的安全漏洞分析和测试，我们的框
架能够自动化地生成测试用例，有效地识别和定位潜在的安全风险。本框架不仅实现了对基
本ROS节点的广泛覆盖，还针对ROS2引入的新特性和改进进行了专门的测试和优化，确保了
对最新ROS版本的全面支持。我们的框架采用了多种先进的模糊测试策略，包括基于属性的
输入生成、时间序列分析以及动态行为监控等。这些策略的结合不仅大大提高了测试用例的
有效性，还能够模拟复杂的操作环境，更准确地反映真实世界中的应用场景。

经过对项目的广泛测试，本作品在测试程序中发现了28个真实漏洞，并提供了稳定的复现办
法。这些成果已经向ROS社区反馈，并得到了部分漏洞的修复和更新。这不仅证明了我们框
架的有效性与漏洞的价值，也为ROS系统的安全研究和开发提供了宝贵的实践经验和数据支
持。

%注意: 文件大小不超过5M。%

\end{spacing}
%*********************** 引用部分*******************
\newpage

% XSP 2023/3/16: bib支持不全，暂时改为手动
\section*{参考文献} % section*生成无标号章节题目
\addcontentsline{toc}{section}{参考文献} % 将无标号章节添加至目录
% 延迟插桩论文
[1] Stoica, B.A., Lu, S., Musuvathi, M., \& Nath, S. \textit{WAFFLE: Exposing Memory Ordering Bugs Efficiently with Active Delay Injection}. In EuroSys'23, May 2023. 

% ROZZ论文
[2] K. -T. Xie, J. -J. Bai, Y. -H. Zou and Y. -P. Wang. \textit{ROZZ: Property-based Fuzzing for Robotic Programs in ROS}. 2022 International Conference on Robotics and Automation (ICRA), Philadelphia, PA, USA, 2022, pp. 6786-6792.

% ROS Robust 221 bugs
[3] Timperley, C.S., van der Hoorn, G., Santos, A., Deshpande, H., \& Wasowski, A. \textit{ROBUST: 221 bugs in the Robot Operating System}. Empirical Software Engineering, 29(3), 57, 2024.

% in wkt.tex, use gazebo
[4] "Gazebo: a robot simulation framework." Available: \url{http://gazebosim.org}.

% Asan
[5] Serebryany, K., Bruening, D., Potapenko, A., \& Vyukov, D. \textit{AddressSanitizer: A Fast Address Sanity Checker}. In USENIX ATC 2012, 2012.

% 机器人相关fuzz，用于同类技术对比, 当然也包括[2]
[6] Delgado, R., Campusano, M., \& Bergel, A. \textit{Fuzz testing in behavior-based robotics}. In Proceedings of the 2021 International Conference on Robotics and Automation (ICRA), 9375–9381, 2021.

[7] Woodlief, T., Elbaum, S., \& Sullivan, K. \textit{Fuzzing mobile robot environments for fast automated crash detection}. In Proceedings of the 2021 International Conference on Robotics and Automation (ICRA), 5417–5423, 2021.

[8] Hutchison, C., Zizyte, M., Lanigan, P.E., Guttendorf, D., Wagner, M., Le Goues, C., \& Koopman, P. \textit{Robustness testing of autonomy software}. In Proceedings of the 40th International Conference on Software Engineering: Software Engineering in Practice Track (ICSE-SEIP), 276–285, 2018.

[9] Kim, S. \& Kim, T. \textit{RoboFuzz: fuzzing robotic systems over robot operating system (ROS) for finding correctness bugs}. In Proceedings of the 30th International Symposium on the Foundations of Software Engineering (FSE), 447–458, 2022.

% ros2-fuzz
[10] "Ros2-fuzz: automatic fuzzing for ROS2." Available: \url{https://github.com/rosin-project/ros\_fuzz}.

% AFL
[11] Zalewski, M. \textit{American Fuzzy Lop: A Security-Oriented Fuzzing Tool}. In Proceedings of the Black Hat USA, 2015.

% our bugs' PR and Issue
[12] "SEGV in Navigation2 Issues\#4177." Available: \url{https://github.com/ros-planning/navigation2/issues/4177}.

[13] "Data Race causing UAF in Navigation2 PR\#3972, PR\#3958, Issue\#3940." Available: \url{https://github.com/ros-planning/navigation2/pull/3972}.

[14] "Another UAF in Nagation2 Issue\#4175, PR\#4180, PR\#4176, RclCPP\#2447." Available: \url{https://github.com/ros-planning/navigation2/issues/4175}.

% lhy 部分文献
[15] SAE International. (2018). Levels of driving automation for on-road vehicles. Available: \url{https://www.sae.org/standards/content/j3016\_201806}.

[16] The Economist Intelligence Unit. (2020). The future of autonomous vehicles: Adoption, impact, and innovation. Available: \url{https://www.eiu.com/n/autonomous-vehicles-adoption-impact-innovation}.

[17] McKinsey \& Company. (2019). The impact of autonomous driving technology on the economy. Available: \url{https://www.mckinsey.com/industries/automotive-and-assembly/our-insights/the-impact-of-autonomous-driving-technology-on-the-economy}.

[18] National Highway Traffic Safety Administration. (2018). Automated vehicles for safety. Available: \url{https://www.nhtsa.gov/technology-innovation/automated-vehicles-safety}.

[19] National Transportation Safety Board. (2018). Preliminary report: Highway HWY18MH010. Available: \url{https://www.ntsb.gov/investigations/AccidentReports/Reports/HWY18MH010-prelim.pdf.}

[20] Petit, J., \& Shladover, S. E. (2015). Potential cyberattacks on automated vehicles. IEEE Transactions on Intelligent Transportation Systems, 16(2), 546-556. 

% \begingroup
% \setstretch{2.0}    %行距2
% \setlength{\bibsep}{0pt}    %段前段后0
% \begin{adjustwidth}{0.42cm}{0.42cm} %左右缩进0.42cm
% \bibliography{references}
% \end{adjustwidth}
% \endgroup

\end{document}
